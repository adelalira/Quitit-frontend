"use strict";(self.webpackChunkquitIt=self.webpackChunkquitIt||[]).push([[287],{7287:(xe,v,m)=>{m.r(v),m.d(v,{GroupAreaModule:()=>be});var d=m(9808),h=m(6507),l=m(2382),T=m(5226),p=m.n(T),e=m(7587),C=m(427),k=m(4004),O=m(262),w=m(9646);let M=(()=>{class n{constructor(t){this.userService=t}validate(t){const r=t.value;return this.compruebaUsername(r).pipe((0,k.U)(o=>0==o.filter(c=>c.username==r).length?{usernameAmigo:!0}:null),(0,O.K)(o=>(0,w.of)(null)))}compruebaUsername(t){return this.userService.searchFriends(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.K))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=m(520),x=m(2340);let Z=(()=>{class n{constructor(t){this.http=t,this.baseUrl=x.N.baseUrl}createGroup(t){const r=`${this.baseUrl}/group`;let o=JSON.parse(localStorage.getItem("token"));const s=(new g.WM).set("Authorization",`Bearer ${o}`);return s.append("Access-Control-Allow-Origin","*"),this.http.post(r,t,{headers:s})}getGroupsFromUser(){const t=`${this.baseUrl}/groups`;let r=JSON.parse(localStorage.getItem("token"));const o=(new g.WM).set("Authorization",`Bearer ${r}`);return o.append("Access-Control-Allow-Origin","*"),this.http.get(t,{headers:o})}deleteGroup(t){const r=`${this.baseUrl}/group/${t}`;let o=JSON.parse(localStorage.getItem("token"));const s=(new g.WM).set("Authorization",`Bearer ${o}`);return s.append("Access-Control-Allow-Origin","*"),this.http.delete(r,{headers:s})}modifyMemberCategory(t,r){const o=`${this.baseUrl}/group/${r.id}/member/${t.id}`;let s=JSON.parse(localStorage.getItem("token"));const c=(new g.WM).set("Authorization",`Bearer ${s}`);return c.append("Access-Control-Allow-Origin","*"),this.http.put(o,t,{headers:c})}getGroup(t){const r=`${this.baseUrl}/group/${t}`;let o=JSON.parse(localStorage.getItem("token"));const s=(new g.WM).set("Authorization",`Bearer ${o}`);return s.append("Access-Control-Allow-Origin","*"),this.http.get(r,{headers:s})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=m(3576);const u=function(n,i,t){return{dyslexia:n,biggerCursor:i,spacing:t}};function G(n,i){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.kEZ(2,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.hij(" ",t.groupNameError," ")}}function F(n,i){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("ngClass",e.kEZ(2,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.hij(" ",t.memberNameError," ")}}function q(n,i){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("ngClass",e.kEZ(2,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.hij(" ",t.memberAlreadyAdded," ")}}function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",30),e.NdJ("click",function(o){return e.CHM(t),e.oxw(4).selectFriend(o)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,r=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.kEZ(2,u,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.hij(" ",t.username," ")}}function J(n,i){if(1&n&&(e.TgZ(0,"table",28),e.TgZ(1,"tbody"),e.YNc(2,N,3,6,"tr",29),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.friendsFound)}}function U(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"label",23),e._uU(3,"Member name"),e.qZA(),e.TgZ(4,"input",24),e.NdJ("keyup",function(){return e.CHM(t),e.oxw(2).searchFriend()}),e.qZA(),e.YNc(5,F,2,6,"span",15),e.YNc(6,q,2,6,"span",15),e.YNc(7,J,3,1,"table",25),e.qZA(),e.TgZ(8,"div"),e._UZ(9,"input",26),e.TgZ(10,"label",27),e._uU(11,"Make admin"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);let r,o;e.xp6(2),e.Q6J("ngClass",e.kEZ(7,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(11,u,t.dyslexia,t.cursor,t.spacing))("value",null==(r=t.myForm.get("memberName"))?null:r.value),e.xp6(1),e.Q6J("ngIf",t.campoNoValido("memberName")),e.xp6(1),e.Q6J("ngIf",!t.checkFieldOfFriend()),e.xp6(1),e.Q6J("ngIf",t.friendsFound.length>0&&t.showTable&&""!=(null==(o=t.myForm.get("memberName"))?null:o.value)),e.xp6(3),e.Q6J("ngClass",e.kEZ(15,u,t.dyslexia,t.cursor,t.spacing))}}function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",11),e.TgZ(2,"div",12),e.TgZ(3,"label",13),e._uU(4,"Group name"),e.qZA(),e._UZ(5,"input",14),e.YNc(6,G,2,6,"span",15),e.qZA(),e.YNc(7,U,12,19,"div",16),e.TgZ(8,"div"),e.TgZ(9,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().pushMember()}),e._uU(10," ADD MEMBER "),e.qZA(),e.qZA(),e.TgZ(11,"div",18),e.TgZ(12,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitForm()}),e._uU(13," CREATE "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let r;e.xp6(1),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngClass",e.kEZ(9,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(13,u,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.Q6J("ngIf",t.campoNoValido("groupName")),e.xp6(1),e.Q6J("ngIf",!(null!=(r=t.myForm.get("groupName"))&&r.invalid)&&null!=(null==(r=t.myForm.get("groupName"))?null:r.value)),e.xp6(2),e.Q6J("ngClass",e.kEZ(17,u,t.dyslexia,t.cursor,t.spacing))("disabled",t.myForm.invalid||1==t.memberAlreadyAddedMistake),e.xp6(3),e.Q6J("disabled",t.groupMembers.length<1)("ngClass",e.kEZ(21,u,t.dyslexia,t.cursor,t.spacing))}}function S(n,i){if(1&n&&e._UZ(0,"img",39),2&n){const t=e.oxw().$implicit;e.s9C("src",t.user.imageUrl,e.LSH)}}function P(n,i){1&n&&e._UZ(0,"img",40)}function Q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",34),e.YNc(1,S,1,1,"img",35),e.YNc(2,P,1,0,"ng-template",null,10,e.W1O),e.TgZ(4,"div",36),e.TgZ(5,"h5",37),e._uU(6),e.qZA(),e.TgZ(7,"button",38),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).deleteMember(s)}),e._uU(8,"DELETE"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,r=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=t.user.imageUrl)("ngIfElse",r),e.xp6(4),e.Q6J("ngClass",e.kEZ(6,u,o.dyslexia,o.cursor,o.spacing)),e.xp6(1),e.AsE("",t.user.username," - ",t.cargo,""),e.xp6(1),e.Q6J("ngClass",e.kEZ(10,u,o.dyslexia,o.cursor,o.spacing))}}function I(n,i){if(1&n&&(e.TgZ(0,"div",31),e.TgZ(1,"div",32),e._uU(2),e.qZA(),e.YNc(3,Q,9,14,"div",33),e.qZA()),2&n){const t=e.oxw();let r;e.xp6(2),e.Oqu(null==(r=t.myForm.get("groupName"))?null:r.value),e.xp6(1),e.Q6J("ngForOf",t.groupMembers)}}function Y(n,i){if(1&n&&(e.TgZ(0,"div",43),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.qZA()),2&n){const t=i.$implicit,r=e.oxw(2);e.MGl("routerLink","/groupArea/group/",t.id,""),e.xp6(1),e.Q6J("ngClass",e.kEZ(3,u,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.Oqu(t.name)}}function D(n,i){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,Y,3,7,"div",42),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.groups)}}function R(n,i){if(1&n&&(e.TgZ(0,"div",44),e._uU(1,"You don't have any group yet."),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(1,u,t.dyslexia,t.cursor,t.spacing))}}let B=(()=>{class n{constructor(t,r,o,s,c){this.fb=t,this.userService=r,this.usernameFriendService=o,this.groupService=s,this.accesibilityService=c,this.crear=!1,this.user=JSON.parse(localStorage.getItem("user")),this.groups=[],this.newMemberForm=!1,this.searchUsername="",this.friendsFound=[],this.friendsSelected=[],this.groupMembers=[],this.noFriendsFound=!1,this.save=!1,this.newUser=!1,this.showTable=!0,this.search="",this.memberAlreadyAddedMistake=!1,this.dyslexia=!1,this.cursor=!1,this.spacing=!1,this.myForm=this.fb.group({groupName:[,[l.kI.required]],memberName:[,[l.kI.required],[this.usernameFriendService]],admin:[,]})}ngOnInit(){this.getUserData(),this.myForm.reset({groupName:"",memberName:""}),this.getGroupsFromUser(),this.accesibilityService.searchChangesBoolean().subscribe(t=>{this.dyslexia=t}),this.accesibilityService.searchChangesCursor().subscribe(t=>{this.cursor=t}),this.accesibilityService.searchChangesSpacing().subscribe(t=>{this.spacing=t})}pushMember(){this.friendsSelected.push(this.userSelected),this.groupMembers.push(this.crearMember()),this.memberAlreadyAddedMistake=!1}crearGroup(){this.crear=!0}crearMember(){var t;let r=1==(null===(t=this.myForm.get("admin"))||void 0===t?void 0:t.value)?"AMDIN":"NO_ADMIN";return{user:this.userSelected,cargo:r}}getUserData(){this.userService.updateUser().subscribe({next:t=>{this.user=t},error:t=>{p().fire({title:"Error",icon:"error",text:t.error.mensaje,confirmButtonColor:"#52ab98"})}})}getGroupsFromUser(){this.groupService.getGroupsFromUser().subscribe({next:t=>{this.groups=t},error:t=>{p().fire({title:"Error",icon:"error",text:t.error.mensaje,confirmButtonColor:"#52ab98"})}})}get memberNameError(){var t;const r=null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.errors;return r.required?"Username required":r.usernameAmigo?"This username does not match any of your friends usernames":""}get groupNameError(){var t;return(null===(t=this.myForm.get("groupName"))||void 0===t?void 0:t.errors).required?"Group name required":""}get memberAlreadyAdded(){return this.memberAlreadyAddedMistake?"Member already added to the group":""}campoNoValido(t){var r,o;return(null===(r=this.myForm.get(t))||void 0===r?void 0:r.invalid)&&(null===(o=this.myForm.get(t))||void 0===o?void 0:o.touched)}searchFriend(){var t;this.userService.searchFriendsForGroup(null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.value,this.friendsSelected).subscribe({next:r=>{this.friendsFound=r,this.showTable=!0,0==r.length&&(this.noFriendsFound=!0),this.checkFieldOfFriend()},error:r=>{}})}submitForm(){var t;this.groupMembers.push({user:this.user,cargo:"ADMIN"});const o={name:null===(t=this.myForm.get("groupName"))||void 0===t?void 0:t.value,groupMembers:this.groupMembers};this.groupService.createGroup(o).subscribe({next:s=>{p().fire({title:"Success",icon:"success",text:"Group created!",confirmButtonColor:"#52ab98"}),this.groups.push(s),localStorage.setItem("user",JSON.stringify(this.user))},error:s=>{p().fire({title:"Error",icon:"error",text:"Errors occurred whilst creating the group :(",confirmButtonColor:"#52ab98"})}}),this.myForm.reset({groupName:"",memberName:""}),this.groupMembers=this.groupMembers.filter(s=>0==s.id),this.friendsSelected=this.friendsSelected.filter(s=>0==s.id)}selectFriend(t){var r;this.noFriendsFound=!1,this.showTable=!1;let o=t.target;this.myForm.controls.memberName.setValue(o.innerText),null===(r=this.myForm.get("memberName"))||void 0===r||r.setValue(o.innerText),this.userSelected=this.friendsFound.filter(s=>s.username==o.innerText)[0]}addMember(){this.newUser=!0,this.showTable=!1}deleteMember(t){const r=this.friendsSelected.indexOf(t.user),o=this.groupMembers.indexOf(t);-1!==r&&(this.friendsSelected.splice(r,1),this.groupMembers.splice(o,1))}checkFieldOfFriend(){var t;let r=null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.value,o=0==this.friendsSelected.filter(s=>s.username==r).length;return this.memberAlreadyAddedMistake=!o,o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(C.K),e.Y36(M),e.Y36(Z),e.Y36(_.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-group-area"]],decls:15,vars:19,consts:[[3,"ngClass"],[1,"row"],[1,"title",3,"ngClass"],[1,"mt-5"],[1,"btn","boton","text-center","newGroup",3,"ngClass","click"],[4,"ngIf"],[1,"conjuntoGrupo"],["class","row vistaGrupo justify-content-evenly",4,"ngIf"],[1,"mt-4","row"],["class","row justify-content-around mt-5",4,"ngIf","ngIfElse"],["elseBlock",""],["autocomplete","off",1,"form",3,"formGroup"],[1,"form-group"],["for","groupName",1,"izquierda",3,"ngClass"],["type","text","id","groupName","formControlName","groupName","name","groupName","placeholder","Enter a group name",1,"form-control",3,"ngClass"],["class","form-text text-danger",3,"ngClass",4,"ngIf"],["class","row mt-4 p-0 m-0",4,"ngIf"],[1,"btn","boton","mt-4",3,"ngClass","disabled","click"],[1,"text-center"],["type","submit",1,"btn","boton","mt-3",3,"disabled","ngClass","click"],[1,"form-text","text-danger",3,"ngClass"],[1,"row","mt-4","p-0","m-0"],[1,"form-group","grupo"],["for","memberName",3,"ngClass"],["type","text","formControlName","memberName","name","memberName","placeholder","Enter the username of your friend",1,"form-control",3,"ngClass","value","keyup"],["class","table table-hover tt",4,"ngIf"],["type","checkbox","formControlName","admin",1,"form-check-input"],["for","admin",1,"form-check-label",3,"ngClass"],[1,"table","table-hover","tt"],[4,"ngFor","ngForOf"],[1,"username",3,"ngClass","click"],[1,"row","vistaGrupo","justify-content-evenly"],[1,"title","mb-5"],["class","card cardMember text-center","style","width: 18rem",4,"ngFor","ngForOf"],[1,"card","cardMember","text-center",2,"width","18rem"],["class","centrar","width","300","height","150","alt","User image",3,"src",4,"ngIf","ngIfElse"],[1,"card-body"],[1,"letraAmigo",3,"ngClass"],[1,"btn","boton",3,"ngClass","click"],["width","300","height","150","alt","User image",1,"centrar",3,"src"],["src","https://picsum.photos/300/150","width","300","height","150","alt","placeholder",1,"centrar"],[1,"row","justify-content-around","mt-5"],["class","card col-md-9 mb-5 col-lg-5 text-center group p-5",3,"routerLink",4,"ngFor","ngForOf"],[1,"card","col-md-9","mb-5","col-lg-5","text-center","group","p-5",3,"routerLink"],[1,"noGroups",3,"ngClass"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3,"My groups"),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.crearGroup()}),e._uU(6," Create group "),e.qZA(),e.qZA(),e.YNc(7,E,14,25,"div",5),e.TgZ(8,"div"),e.TgZ(9,"div",6),e.YNc(10,I,4,2,"div",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,D,2,1,"div",9),e.YNc(13,R,2,5,"ng-template",null,10,e.W1O),e.qZA(),e.qZA()),2&t){const o=e.MAs(14);e.Q6J("ngClass",e.kEZ(7,u,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(11,u,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(15,u,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngIf",r.crear),e.xp6(3),e.Q6J("ngIf",r.groupMembers.length>0),e.xp6(2),e.Q6J("ngIf",r.groups.length>0)("ngIfElse",o)}},directives:[d.mk,d.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.Wl,d.sg,h.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Dancing+Script&family=Roboto+Serif:wght@100&family=Satisfy&family=Yellowtail&display=swap";@import"https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,500&family=Titan+One&display=swap";.img[_ngcontent-%COMP%]{width:40px;margin-left:10px}.newGroup[_ngcontent-%COMP%]{float:right;margin-right:3em;position:relative}.title[_ngcontent-%COMP%]{text-align:center;letter-spacing:3px;font-size:2em;font-family:Titan One,cursive;font-weight:700;text-shadow:4px 4px 2px #c8d8e4}.boton[_ngcontent-%COMP%]{background-color:#52ab98}.noGroups[_ngcontent-%COMP%]{text-align:center;margin-top:8rem}.icon[_ngcontent-%COMP%]{max-width:30px;height:auto;border-radius:50%}.icon2[_ngcontent-%COMP%]{max-width:35px;height:auto}.addMember[_ngcontent-%COMP%]{border-radius:5%}.username[_ngcontent-%COMP%]:hover{cursor:pointer}.letraAmigo[_ngcontent-%COMP%]{font-size:20px}.centrar[_ngcontent-%COMP%]{margin:auto;display:block}.grupo[_ngcontent-%COMP%]{margin-left:0!important;padding-left:0!important;margin-right:0!important;padding-right:0!important}.vistaGrupo[_ngcontent-%COMP%]{background-color:#c8d8e4;padding:3rem}.cardMember[_ngcontent-%COMP%]{background-color:#f2f2f2}.group[_ngcontent-%COMP%]{padding:2rem;background-color:#2b6777}.group[_ngcontent-%COMP%]:hover{background-color:#c8d8e4;cursor:pointer}@font-face{font-family:OpenDyslexic3Regular;src:local("OpenDyslexic3Regular"),url(OpenDyslexic-Regular.0f3361c226094c3f.otf) format("truetype")}.dyslexia[_ngcontent-%COMP%]{font-family:OpenDyslexic3Regular!important;font-weight:400;font-style:normal}.biggerCursor[_ngcontent-%COMP%]{cursor:url("cursor(1).a626298f25970abf.png"),auto!important}.spacing[_ngcontent-%COMP%]{letter-spacing:3px!important}.tt[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width: 769px){.izquierda[_ngcontent-%COMP%]{float:left}.boton[_ngcontent-%COMP%]{background-color:#52ab98;align-items:center}.form[_ngcontent-%COMP%]{margin:1rem}input[_ngcontent-%COMP%]:not([type = "checkbox"]){width:100%}.form-group[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}}@media screen and (min-width: 769px) and (max-width: 1279px){form[_ngcontent-%COMP%]{margin:2rem 8rem}.conjuntoGrupo[_ngcontent-%COMP%]{margin:auto 7rem}}@media screen and (min-width: 1279px){form[_ngcontent-%COMP%]{margin:2rem 8rem}.conjuntoGrupo[_ngcontent-%COMP%]{margin:auto 7rem}}']}),n})(),$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-user-group"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"add-user-group works!"),e.qZA())},styles:[""]}),n})(),j=(()=>{class n{constructor(t){this.http=t,this.baseUrl=x.N.baseUrl}addCommentsGroup(t,r){const o=`${this.baseUrl}/group/${r}/commentsGroup`,s={text:t};let c=JSON.parse(localStorage.getItem("token"));const f=(new g.WM).set("Authorization",`Bearer ${c}`);return f.append("Access-Control-Allow-Origin","*"),this.http.post(o,s,{headers:f})}getGroupComments(t){const r=`${this.baseUrl}/group/${t}/commentsGroup`;let o=JSON.parse(localStorage.getItem("token"));const s=(new g.WM).set("Authorization",`Bearer ${o}`);return s.append("Access-Control-Allow-Origin","*"),this.http.get(r,{headers:s})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L=["scrollBottom"],b=function(n,i,t){return{dyslexia:n,biggerCursor:i,spacing:t}};function z(n,i){if(1&n&&(e.TgZ(0,"div",12),e.TgZ(1,"label",13),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"label",14),e._uU(5),e.qZA(),e.qZA()),2&n){const t=i.$implicit,r=e.oxw();e.Q6J("ngClass",e.kEZ(6,b,r.dyslexia,r.cursor,r.spacing))("ngClass",r.user.username==t.user.username?"enviado":"recibido"),e.xp6(1),e.Q6J("ngClass",e.kEZ(10,b,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.hij("",t.user.username,":"),e.xp6(2),e.Q6J("ngClass",e.kEZ(14,b,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.Oqu(t.text)}}let y=(()=>{class n{constructor(t,r,o,s){this.accesibilityService=t,this.rutaActiva=r,this.commentsGroupService=o,this.router=s,this.user=JSON.parse(localStorage.getItem("user")),this.comentarios=[],this.text="",this.id=this.rutaActiva.snapshot.params.id,this.dyslexia=!1,this.cursor=!1,this.spacing=!1}ngOnInit(){this.mostrarComentariosComunidad(),setInterval(()=>this.mostrarComentariosComunidad(),1e4),this.scrollToBottom(),this.accesibilityService.searchChangesBoolean().subscribe(t=>{this.dyslexia=t}),this.accesibilityService.searchChangesCursor().subscribe(t=>{this.cursor=t}),this.accesibilityService.searchChangesSpacing().subscribe(t=>{this.spacing=t})}ngAfterViewChecked(){this.scrollToBottom()}mostrarComentariosComunidad(){this.commentsGroupService.getGroupComments(this.id).subscribe({next:t=>{this.comentarios=t},error:t=>{}})}crearComentario(){""!=this.text.trim()&&this.commentsGroupService.addCommentsGroup(this.text,this.id).subscribe({next:t=>{this.comentarios.push(t),this.text=""},error:t=>{p().fire({title:"Error",icon:"error",text:t.error.mensaje,confirmButtonColor:"#52ab98"})}})}scrollToBottom(){try{this.scrollBottom.nativeElement.scrollTop=this.scrollBottom.nativeElement.scrollHeight}catch(t){}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.f),e.Y36(h.gz),e.Y36(j),e.Y36(h.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comments-group"]],viewQuery:function(t,r){if(1&t&&e.Gf(L,5),2&t){let o;e.iGM(o=e.CRH())&&(r.scrollBottom=o.first)}},decls:13,vars:13,consts:[[1,"card","text-center","cardContainer"],[1,"card-header"],[1,"card-body"],["id","contenedorDeMensajes",1,"contenedorDeMensajes"],["scrollBottom",""],["class","enviado p-2 msj",3,"ngClass",4,"ngFor","ngForOf"],["autocomplete","off","autocomplete","off",1,"row","text-center",3,"ngSubmit"],["miFormulario","ngForm"],[1,"card-footer","text-muted","input-group"],[1,"row","textoContainer"],["type","text","name","text","id","text","placeholder"," *Your comment","required","required",1,"form-control","texto",3,"ngClass","ngModel","ngModelChange"],["type","submit",1,"btn","send",3,"ngClass","disabled"],[1,"enviado","p-2","msj",3,"ngClass"],[1,"username",3,"ngClass"],[1,"comentarioUser",3,"ngClass"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3,4),e.YNc(5,z,6,18,"div",5),e.qZA(),e.TgZ(6,"form",6,7),e.NdJ("ngSubmit",function(){return r.crearComentario()}),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(s){return r.text=s}),e.qZA(),e.TgZ(11,"button",11),e._uU(12," Send "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const o=e.MAs(7);e.xp6(5),e.Q6J("ngForOf",r.comentarios),e.xp6(5),e.Q6J("ngClass",e.kEZ(5,b,r.dyslexia,r.cursor,r.spacing))("ngModel",r.text),e.xp6(1),e.Q6J("ngClass",e.kEZ(9,b,r.dyslexia,r.cursor,r.spacing))("disabled",o.invalid)}},directives:[d.sg,l._Y,l.JL,l.F,l.Fj,l.Q7,d.mk,l.JJ,l.On],styles:['.bloqueComentario[_ngcontent-%COMP%]{margin:2em;display:flex;justify-content:center;background-color:#f2f2f2;padding-top:1em;padding-bottom:1em;border-radius:10px}.imgReport[_ngcontent-%COMP%]{width:40px}.form-control[_ngcontent-%COMP%]{margin-left:4em!important;width:1100px}button[_ngcontent-%COMP%]{background-color:#52ab98;color:#fff;width:150px}@font-face{font-family:OpenDyslexic3Regular;src:local("OpenDyslexic3Regular"),url(OpenDyslexic-Regular.0f3361c226094c3f.otf) format("truetype")}.dyslexia[_ngcontent-%COMP%]{font-family:OpenDyslexic3Regular!important;font-weight:400;font-style:normal}.biggerCursor[_ngcontent-%COMP%]{cursor:url("cursor(1).a626298f25970abf.png"),auto!important}.spacing[_ngcontent-%COMP%]{letter-spacing:3px!important}.cardContainer[_ngcontent-%COMP%]{height:500px}.card-header[_ngcontent-%COMP%]{background-color:#52ab98;color:#fff;font-weight:700}.input-group-text[_ngcontent-%COMP%]{background-color:#52ab98;color:#fff}.card-body[_ngcontent-%COMP%]{background-image:url(fondoChat2.80674240edeb97bf.png);height:100%!important}.enviado[_ngcontent-%COMP%]{display:block;float:right;background-color:#2b6777;color:#fff;min-width:50.01%;border-radius:10px;margin-bottom:1em}.recibido[_ngcontent-%COMP%]{display:block;float:left;background-color:#c8d8e4;color:#000;min-width:50.01%;border-radius:10px;margin-bottom:1em}.contenedorDeMensajes[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.username[_ngcontent-%COMP%]{display:block;float:left;padding-left:1em}.comentarioUser[_ngcontent-%COMP%]{display:block;float:left;padding-left:.2em;text-align:left!important}.texto[_ngcontent-%COMP%]{margin:0!important}.textoContainer[_ngcontent-%COMP%]{padding:.5rem}@media screen and (min-width: 1279px){input[_ngcontent-%COMP%]{width:70%;border-radius:5px;height:46px;padding-bottom:7px;margin-right:2em}.barra[_ngcontent-%COMP%]{margin-top:100px}.contenedorDeMensajes[_ngcontent-%COMP%]{height:106%;overflow:auto;scroll-snap-type:y mandatory}}@media screen and (min-width: 769px) and (max-width: 1279px){input[_ngcontent-%COMP%]{width:60%;border-radius:5px;height:46px;padding-bottom:7px;margin-right:2em;margin-left:1em}.form-control[_ngcontent-%COMP%]{margin-left:2em!important;width:600px}button[_ngcontent-%COMP%]{background-color:#52ab98;color:#fff;width:150px;margin-right:2em}.contenedorDeMensajes[_ngcontent-%COMP%]{height:40vh;overflow:auto;scroll-snap-type:y mandatory;margin-bottom:10px}.barra[_ngcontent-%COMP%]{margin-top:370px}.texto[_ngcontent-%COMP%]{width:100%}.textoContainer[_ngcontent-%COMP%]{justify-content:center}form[_ngcontent-%COMP%]{height:100px}}@media screen and (max-width: 769px){input[_ngcontent-%COMP%]{width:60%;border-radius:5px;height:46px;padding-bottom:7px;margin-right:10px;margin-left:1em}button[_ngcontent-%COMP%]{width:22%}.contenedorDeMensajes[_ngcontent-%COMP%]{overflow:auto;scroll-snap-type:y mandatory}#contenedorDeMensajes[_ngcontent-%COMP%]{height:106%}.barra[_ngcontent-%COMP%]{margin-top:250px}.texto[_ngcontent-%COMP%]{width:100%}.send[_ngcontent-%COMP%]{width:40%}}.imgReport[_ngcontent-%COMP%]{max-width:40px;float:right}']}),n})();function W(n,i){1&n&&e._UZ(0,"img",4)}function H(n,i){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,W,1,0,"img",3),e._uU(2),e.qZA()),2&n){const t=i.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",t==r.members[0]),e.xp6(1),e.AsE("",t.user.daysInARowWithoutSmoking," - ",t.user.username," ")}}let A=(()=>{class n{constructor(t,r,o){this.rutaActiva=t,this.accesibilityService=r,this.groupService=o,this.reload=!1,this.members=[],this.membersUsers=[],this.id=this.rutaActiva.snapshot.params.id,this.dyslexia=!1,this.cursor=!1,this.spacing=!1}ngOnChanges(){this.getGroupFromUser(),this.reload=!1}ngOnInit(){this.getGroupFromUser(),this.accesibilityService.searchChangesBoolean().subscribe(t=>{this.dyslexia=t}),this.accesibilityService.searchChangesCursor().subscribe(t=>{this.cursor=t}),this.accesibilityService.searchChangesSpacing().subscribe(t=>{this.spacing=t})}getGroupFromUser(){this.groupService.getGroup(this.id).subscribe({next:t=>{this.group=t,this.members=[],this.membersUsers=[],t.groupMembers.forEach(r=>{this.membersUsers.push(r.user),this.members.push(r)}),this.sortArray()},error:t=>{}})}sortArray(){this.members.sort((t,r)=>r.user.daysInARowWithoutSmoking-t.user.daysInARowWithoutSmoking)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.gz),e.Y36(_.f),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ranking-group"]],inputs:{reload:"reload"},features:[e.TTD],decls:2,vars:1,consts:[[1,"row","clase","mt-3"],["class","row justify-content-center mb-3",4,"ngFor","ngForOf"],[1,"row","justify-content-center","mb-3"],["src","./assets/crown(1).png","class","icon2",4,"ngIf"],["src","./assets/crown(1).png",1,"icon2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,H,3,3,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",r.members))},directives:[d.sg,d.O5],styles:['.icon2[_ngcontent-%COMP%]{max-width:50px;height:auto}@font-face{font-family:OpenDyslexic3Regular;src:local("OpenDyslexic3Regular"),url(OpenDyslexic-Regular.0f3361c226094c3f.otf) format("truetype")}.dyslexia[_ngcontent-%COMP%]{font-family:OpenDyslexic3Regular!important;font-weight:400;font-style:normal}.biggerCursor[_ngcontent-%COMP%]{cursor:url("cursor(1).a626298f25970abf.png"),auto!important}.spacing[_ngcontent-%COMP%]{letter-spacing:3px!important}']}),n})(),V=(()=>{class n{constructor(t){this.http=t,this.baseUrl=x.N.baseUrl}checkmembersOfAGroup(t){const r=`${this.baseUrl}/group/${t}/groupMember`;let o=JSON.parse(localStorage.getItem("token"));const s=(new g.WM).set("Authorization",`Bearer ${o}`);return s.append("Access-Control-Allow-Origin","*"),this.http.get(r,{headers:s})}addNewMemberToGroup(t,r){const o=`${this.baseUrl}/group/${r}/member`;let s=JSON.parse(localStorage.getItem("token"));const c=(new g.WM).set("Authorization",`Bearer ${s}`);return c.append("Access-Control-Allow-Origin","*"),this.http.post(o,t,{headers:c})}deleteMember(t,r){const o=`${this.baseUrl}/group/${r}/member/${t.id}`;let s=JSON.parse(localStorage.getItem("token"));const c=(new g.WM).set("Authorization",`Bearer ${s}`);return c.append("Access-Control-Allow-Origin","*"),this.http.delete(o,{headers:c})}changeRoleOfmember(t,r,o){const s=`${this.baseUrl}/group/${r}/member/${t}`;let c=JSON.parse(localStorage.getItem("token"));const f=(new g.WM).set("Authorization",`Bearer ${c}`);return f.append("Access-Control-Allow-Origin","*"),this.http.put(s,o,{headers:f})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a=function(n,i,t){return{dyslexia:n,biggerCursor:i,spacing:t}};function K(n,i){if(1&n&&(e.TgZ(0,"button",37),e._uU(1," Delete member "),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(1,a,t.dyslexia,t.cursor,t.spacing))}}function X(n,i){if(1&n&&(e.TgZ(0,"button",38),e._uU(1," Delete group "),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(1,a,t.dyslexia,t.cursor,t.spacing))}}function ee(n,i){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.kEZ(2,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.hij(" ",t.memberNameError," ")}}function te(n,i){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.kEZ(2,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.hij(" ",t.memberAlreadyAdded," ")}}function re(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",53),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).selectFriend(o)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.kEZ(2,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.hij(" ",t.username," ")}}function ne(n,i){if(1&n&&(e.TgZ(0,"table",51),e.TgZ(1,"tbody"),e.YNc(2,re,3,6,"tr",52),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.friendsFound)}}function oe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"form",40),e.TgZ(2,"div",41),e.TgZ(3,"label",42),e._uU(4,"Username"),e.qZA(),e.TgZ(5,"input",43),e.NdJ("keyup",function(){return e.CHM(t),e.oxw().searchFriend()}),e.qZA(),e.YNc(6,ee,2,6,"span",44),e.YNc(7,te,2,6,"span",44),e.YNc(8,ne,3,1,"table",45),e.qZA(),e.TgZ(9,"div",46),e._UZ(10,"input",47),e.TgZ(11,"label",48),e._uU(12,"Make admin"),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitForm()}),e._uU(15," ADD "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let r,o;e.xp6(1),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngClass",e.kEZ(9,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("value",null==(r=t.myForm.get("memberName"))?null:r.value),e.xp6(1),e.Q6J("ngIf",t.campoNoValido("memberName")),e.xp6(1),e.Q6J("ngIf",!t.checkFieldOfFriend()),e.xp6(1),e.Q6J("ngIf",t.friendsFound.length>0&&t.showTable&&""!=(null==(o=t.myForm.get("memberName"))?null:o.value)),e.xp6(3),e.Q6J("ngClass",e.kEZ(13,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(17,a,t.dyslexia,t.cursor,t.spacing))("disabled",t.myForm.invalid||t.memberAlreadyAddedMistake)}}function ie(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button"),e.TgZ(1,"img",54),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).editRoles(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("id",t.user.username),e.s9C("name",t.cargo)}}function se(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.YNc(2,ie,2,2,"button",13),e.qZA()),2&n){const t=i.$implicit,r=e.oxw(2);e.xp6(1),e.AsE(" ",t.user.username," - ",t.cargo," "),e.xp6(1),e.Q6J("ngIf",t.user.username!=r.user.username)}}function ae(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,se,3,3,"p",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.group.groupMembers)}}function le(n,i){if(1&n&&(e.TgZ(0,"p",60),e._uU(1),e.qZA()),2&n){const t=i.$implicit,r=e.oxw(2);e.Q6J("ngClass",e.kEZ(3,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.AsE(" ",t.user.username," - ",t.cargo," ")}}function ce(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button"),e.TgZ(1,"img",61),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).manageRoles()}),e.qZA(),e.qZA()}}function ue(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button"),e.TgZ(1,"img",62),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).close()}),e.qZA(),e.qZA()}}function me(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"label",55),e._uU(3),e.qZA(),e.TgZ(4,"select",56),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().cargoOption=o}),e.TgZ(5,"option",57),e._uU(6,"ADMIN"),e.qZA(),e.TgZ(7,"option",58),e._uU(8,"NO_ADMIN"),e.qZA(),e.qZA(),e.YNc(9,le,2,7,"p",59),e.qZA(),e.YNc(10,ce,2,0,"button",13),e.YNc(11,ue,2,0,"button",13),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(11,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(1),e.Oqu(t.usernameEditing),e.xp6(1),e.s9C("name",t.usernameEditing),e.s9C("id",t.usernameEditing),e.Q6J("ngClass",e.kEZ(15,a,t.dyslexia,t.cursor,t.spacing))("ngModel",t.cargoOption),e.xp6(1),e.Q6J("ngClass",e.kEZ(19,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(23,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("ngForOf",t.groupToChangeRole),e.xp6(1),e.Q6J("ngIf",t.editing),e.xp6(1),e.Q6J("ngIf",t.editing)}}function ge(n,i){if(1&n&&(e.TgZ(0,"option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit,r=e.oxw();e.s9C("value",t.user.username),e.Q6J("ngClass",e.kEZ(3,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.hij(" ",t.user.username," ")}}function pe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"label",66),e._uU(2),e.qZA(),e.TgZ(3,"select",56),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.user.username=o}),e.TgZ(4,"option",67),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,r=e.oxw(2);e.xp6(1),e.s9C("for",t.user.username),e.Q6J("ngClass",e.kEZ(11,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.Oqu(t.user.username),e.xp6(1),e.s9C("name",t.user.username),e.s9C("id",t.user.username),e.Q6J("ngClass",e.kEZ(15,a,r.dyslexia,r.cursor,r.spacing))("ngModel",t.user.username),e.xp6(1),e.s9C("value",t.user.username),e.s9C("id",t.user.username),e.Q6J("ngClass",e.kEZ(19,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.hij(" ",t.user.username," ")}}function de(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",64),e.TgZ(2,"div",20),e.TgZ(3,"div",21),e.TgZ(4,"div",22),e.TgZ(5,"h5",65),e._uU(6," EDIT MEMBERS' ROLE "),e.qZA(),e._UZ(7,"button",24),e.qZA(),e.YNc(8,pe,6,23,"div",52),e.TgZ(9,"div",26),e.TgZ(10,"button",27),e._uU(11," Cancel "),e.qZA(),e.TgZ(12,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteMember()}),e._uU(13," OK "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngClass",e.kEZ(4,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(3),e.Q6J("ngForOf",t.group.groupMembers),e.xp6(2),e.Q6J("ngClass",e.kEZ(8,a,t.dyslexia,t.cursor,t.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(12,a,t.dyslexia,t.cursor,t.spacing))}}const he=[{path:"",component:B},{path:"group/:id",component:(()=>{class n{constructor(t,r,o,s,c,f,_e,Ce){this.userService=t,this.usernameFriendService=r,this.fb=o,this.rutaActiva=s,this.groupService=c,this.groupMemberService=f,this.router=_e,this.accesibilityService=Ce,this.myForm=this.fb.group({memberName:[,[l.kI.required],[this.usernameFriendService]],admin:[,]}),this.id=this.rutaActiva.snapshot.params.id,this.user=JSON.parse(localStorage.getItem("user")),this.add=!1,this.friendsFound=[],this.friendsSelected=[],this.noFriendsFound=!1,this.search="",this.showTable=!0,this.memberAlreadyAddedMistake=!1,this.newUser=!1,this.reload=!1,this.opcion="",this.membersToDelete=[],this.editing=!1,this.cargoOption="",this.usernameEditing="",this.groupToChangeRole=[],this.dyslexia=!1,this.cursor=!1,this.spacing=!1}ngOnInit(){this.getGroupFromUser(),this.myForm.reset({groupName:"",memberName:""}),this.membersToDelete=this.group.groupMembers.filter(t=>t.user.username!=this.user.username),this.accesibilityService.searchChangesBoolean().subscribe(t=>{this.dyslexia=t}),this.accesibilityService.searchChangesCursor().subscribe(t=>{this.cursor=t}),this.accesibilityService.searchChangesSpacing().subscribe(t=>{this.spacing=t})}getGroupFromUser(){this.groupService.getGroup(this.id).subscribe({next:t=>{this.group=t,this.membersToDelete=t.groupMembers.filter(r=>r.user.username!=this.user.username),t.groupMembers.forEach(r=>{this.friendsSelected.push(r.user)})},error:t=>{p().fire({title:"Error",icon:"error",text:"You are not a member of this group",confirmButtonColor:"#52ab98"}),this.router.navigateByUrl("/groupArea")}})}checkUsersRole(){return"ADMIN"==this.group.groupMembers.filter(r=>r.user.username==this.user.username)[0].cargo}deleteMember(t){if(null==t&&""!=this.opcion){const r=this.membersToDelete.filter(o=>o.user.username==this.opcion)[0];this.groupMemberService.deleteMember(r,this.id).subscribe({next:o=>{this.group.groupMembers=this.group.groupMembers.filter(s=>s!=r),this.membersToDelete=this.membersToDelete.filter(s=>s!=r),this.getGroupFromUser(),this.reload=!this.reload,this.group.groupMembers.length<=1&&this.deleteGroup()},error:o=>{p().fire({title:"Error",icon:"error",text:"We could not remove the member of the group",confirmButtonColor:"#52ab98"})}})}else if(this.group.groupMembers.length<=2)this.deleteGroup();else{const r=this.group.groupMembers.filter(o=>o.user.username==this.user.username)[0];this.groupMemberService.deleteMember(r,this.id).subscribe({next:o=>{this.group.groupMembers=this.group.groupMembers.filter(s=>s!=r),this.membersToDelete=this.membersToDelete.filter(s=>s!=r),this.router.navigateByUrl("/groupArea")},error:o=>{p().fire({title:"Error",icon:"error",text:"We could not remove you from the group",confirmButtonColor:"#52ab98"})}})}}deleteGroup(){this.groupService.deleteGroup(this.id).subscribe({next:t=>{this.router.navigateByUrl("/groupArea")},error:t=>{p().fire({title:"Error",icon:"error",text:"We could not delete the group",confirmButtonColor:"#52ab98"})}})}compruebaCargoUser(){return"ADMIN"==this.group.groupMembers.filter(t=>t.user.username==this.user.username)[0].cargo}pushMember(){this.crearMember(),this.memberAlreadyAddedMistake=!1}crearMember(){var t;let r=1==(null===(t=this.myForm.get("admin"))||void 0===t?void 0:t.value)?"AMDIN":"NO_ADMIN";return{user:this.userSelected,cargo:r}}searchFriend(){var t;this.userService.searchFriendsForGroup(null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.value,this.friendsSelected).subscribe({next:r=>{this.friendsFound=r,this.showTable=!0,0==r.length&&(this.noFriendsFound=!0),this.checkFieldOfFriend()},error:r=>{}})}get memberNameError(){var t;const r=null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.errors;return r.required?"Username required":r.usernameAmigo?"This username does not match any of your friends usernames":""}get memberAlreadyAdded(){return this.memberAlreadyAddedMistake?"Member already added to the group":""}campoNoValido(t){var r,o;return(null===(r=this.myForm.get(t))||void 0===r?void 0:r.invalid)&&(null===(o=this.myForm.get(t))||void 0===o?void 0:o.touched)}selectFriend(t){var r;this.noFriendsFound=!1,this.showTable=!1;let o=t.target;this.myForm.controls.memberName.setValue(o.innerText),null===(r=this.myForm.get("memberName"))||void 0===r||r.setValue(o.innerText),this.userSelected=this.friendsFound.filter(s=>s.username==o.innerText)[0]}addMember(){this.newUser=!this.newUser,this.showTable=!1}checkFieldOfFriend(){var t;let r=null===(t=this.myForm.get("memberName"))||void 0===t?void 0:t.value,o=0==this.friendsSelected.filter(s=>s.username==r).length;return this.memberAlreadyAddedMistake=!o,o}submitForm(){this.memberAlreadyAddedMistake=!1,this.groupMemberService.addNewMemberToGroup(this.crearMember(),+this.id).subscribe({next:t=>{p().fire({title:"Success",icon:"success",text:"Member added!",confirmButtonColor:"#52ab98"}),this.getGroupFromUser(),localStorage.setItem("user",JSON.stringify(this.user)),this.reload=!this.reload},error:t=>{p().fire({title:"Error",icon:"error",text:"Errors occurred whilst adding the new member to the group :(",confirmButtonColor:"#52ab98"})}}),this.myForm.reset({groupName:"",memberName:""}),this.newUser=!1}editRoles(t){this.editing=!0;let r=t.target.id;this.usernameEditing=r,this.groupToChangeRole=this.group.groupMembers.filter(o=>o.user.username!=r)}manageRoles(){this.editing=!1;let t=this.group.groupMembers.filter(r=>r.user.username==this.usernameEditing)[0];t.cargo=this.cargoOption,null!=t.id&&this.groupMemberService.changeRoleOfmember(t.id,this.id,t).subscribe({next:r=>{p().fire({title:"Success",icon:"success",text:"Role changed",confirmButtonColor:"#52ab98"}),this.getGroupFromUser(),localStorage.setItem("user",JSON.stringify(this.user)),this.reload=!this.reload},error:r=>{p().fire({title:"Error",icon:"error",text:"Errors occurred whilst changing the role of the member :(",confirmButtonColor:"#52ab98"})}})}close(){this.editing=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.K),e.Y36(M),e.Y36(l.qu),e.Y36(h.gz),e.Y36(Z),e.Y36(V),e.Y36(h.F0),e.Y36(_.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-group"]],decls:90,vars:120,consts:[[1,"title","mt-2","mb-5",3,"ngClass"],[1,"row","content"],[1,"row","gx-0"],[1,"mt-5","mb-4"],[1,"btn","boton","text-center","b1",3,"ngClass","click"],["class","btn boton text-center b2","data-bs-toggle","modal","data-bs-target","#deleteMemberModal","routerLinkActive","active",3,"ngClass",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#leaveGroupModal","routerLinkActive","active",1,"btn","boton","text-center","b3",3,"ngClass"],["class","btn boton text-center b4","data-bs-toggle","modal","data-bs-target","#deleteGroupModal","routerLinkActive","active",3,"ngClass",4,"ngIf"],["class","row addMemberForm py-3",4,"ngIf"],[1,"row","gx-0","clase","justify-content-around","infoGrupo"],[1,"col-md-4","col-12","members"],[1,"titleMembers","mb-4",3,"ngClass"],[1,"text-center"],[4,"ngIf"],[1,"col-md-7","col-12","ranking"],[1,"titleMembers",3,"ngClass"],[3,"reload"],[1,"row","justify-content-center","chat","mb-5","chatDiv"],[1,"col-9","chat"],["id","addMemberModal","tabindex","-1","aria-labelledby","addMemberModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-header"],["id","addMemberModalLabel",1,"modal-title",3,"ngClass"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",3,"ngClass"],[1,"modal-footer","justify-content-center"],["type","button","data-bs-dismiss","modal",1,"btn","botonNo",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","botonYes",3,"ngClass","click"],["id","deleteMemberModal","tabindex","-1","aria-labelledby","deleteMemberModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteMemberModalLabel",1,"modal-title",3,"ngClass"],[3,"ngModel","ngModelChange"],[3,"ngClass","value",4,"ngFor","ngForOf"],["id","deleteGroupModal","tabindex","-1","aria-labelledby","deleteGroupModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteGroupModalLabel",1,"modal-title",3,"ngClass"],["id","leaveGroupModal","tabindex","-1","aria-labelledby","leaveGroupModalLabel","aria-hidden","true",1,"modal","fade"],["id","leaveGroupModalLabel",1,"modal-title",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#deleteMemberModal","routerLinkActive","active",1,"btn","boton","text-center","b2",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#deleteGroupModal","routerLinkActive","active",1,"btn","boton","text-center","b4",3,"ngClass"],[1,"row","addMemberForm","py-3"],["autocomplete","off",1,"form",3,"formGroup"],[1,"form-group","grupo"],["for","memberName",3,"ngClass"],["type","text","formControlName","memberName","name","memberName","placeholder","Enter the username of your friend",1,"form-control",3,"value","keyup"],["class","form-text text-danger",3,"ngClass",4,"ngIf"],["class","table table-hover",4,"ngIf"],[1,"check"],["type","checkbox","formControlName","admin",1,"form-check-input"],["for","admin",1,"form-check-label","labelCheck",3,"ngClass"],["type","submit",1,"btn","boton",3,"ngClass","disabled","click"],[1,"form-text","text-danger",3,"ngClass"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"username",3,"ngClass","click"],["src","./assets/edit.png",1,"iconEdit",3,"id","name","click"],["for","usernameEditing",3,"ngClass"],[3,"ngClass","name","id","ngModel","ngModelChange"],["value","ADMIN","id","ADMIN",3,"ngClass"],["value","NO_ADMIN","id","NO_ADMIN",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["src","./assets/tick.png",1,"iconEdit",3,"click"],["src","./assets/close.png",1,"iconEdit",3,"click"],[3,"ngClass","value"],["id","editRoleMemberModal","tabindex","-1","aria-labelledby","editRoleMemberModalLabel","aria-hidden","true",1,"modal","fade"],["id","editRoleMemberModalLabel",1,"modal-title",3,"ngClass"],[3,"ngClass","for"],[3,"ngClass","value","id"]],template:function(t,r){1&t&&(e.TgZ(0,"p",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.addMember()}),e._uU(6," Add member "),e.qZA(),e.YNc(7,K,2,5,"button",5),e.TgZ(8,"button",6),e._uU(9," Leave group "),e.qZA(),e.YNc(10,X,2,5,"button",7),e.qZA(),e.TgZ(11,"div"),e.YNc(12,oe,16,21,"div",8),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"div",10),e.TgZ(15,"p",11),e._uU(16,"Members"),e.qZA(),e.TgZ(17,"div",12),e.YNc(18,ae,2,1,"div",13),e.YNc(19,me,12,27,"div",13),e.qZA(),e.qZA(),e.TgZ(20,"div",14),e.TgZ(21,"p",15),e._uU(22,"Ranking"),e.qZA(),e._UZ(23,"app-ranking-group",16),e.qZA(),e.qZA(),e.TgZ(24,"div",17),e.TgZ(25,"div",18),e.TgZ(26,"p",15),e._uU(27,"CHAT"),e.qZA(),e._UZ(28,"app-comments-group"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",19),e.TgZ(30,"div",20),e.TgZ(31,"div",21),e.TgZ(32,"div",22),e.TgZ(33,"h5",23),e._uU(34,"ADD MEMBER"),e.qZA(),e._UZ(35,"button",24),e.qZA(),e.TgZ(36,"div",25),e._uU(37,"Choose the friend you want to add"),e.qZA(),e._UZ(38,"div"),e.TgZ(39,"div",26),e.TgZ(40,"button",27),e._uU(41," Cancel "),e.qZA(),e.TgZ(42,"button",28),e.NdJ("click",function(){return r.addMember()}),e._uU(43," OK "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",29),e.TgZ(45,"div",20),e.TgZ(46,"div",21),e.TgZ(47,"div",22),e.TgZ(48,"h5",30),e._uU(49,"DELETE MEMBER"),e.qZA(),e._UZ(50,"button",24),e.qZA(),e.TgZ(51,"div",25),e._uU(52,"Choose the member you want to remove"),e.qZA(),e.TgZ(53,"div"),e.TgZ(54,"select",31),e.NdJ("ngModelChange",function(s){return r.opcion=s}),e.YNc(55,ge,2,7,"option",32),e.qZA(),e.qZA(),e.TgZ(56,"div",26),e.TgZ(57,"button",27),e._uU(58," Cancel "),e.qZA(),e.TgZ(59,"button",28),e.NdJ("click",function(){return r.deleteMember()}),e._uU(60," OK "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(61,de,14,16,"div",13),e.TgZ(62,"div",33),e.TgZ(63,"div",20),e.TgZ(64,"div",21),e.TgZ(65,"div",22),e.TgZ(66,"h5",34),e._uU(67,"DELETE GROUP"),e.qZA(),e._UZ(68,"button",24),e.qZA(),e.TgZ(69,"div",25),e._uU(70,"Are you sure?"),e.qZA(),e.TgZ(71,"div",26),e.TgZ(72,"button",27),e._uU(73," No "),e.qZA(),e.TgZ(74,"button",28),e.NdJ("click",function(){return r.deleteGroup()}),e._uU(75," Yes "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",35),e.TgZ(77,"div",20),e.TgZ(78,"div",21),e.TgZ(79,"div",22),e.TgZ(80,"h5",36),e._uU(81,"LEAVE GROUP"),e.qZA(),e._UZ(82,"button",24),e.qZA(),e.TgZ(83,"div",25),e._uU(84,"Are you sure?"),e.qZA(),e.TgZ(85,"div",26),e.TgZ(86,"button",27),e._uU(87," No "),e.qZA(),e.TgZ(88,"button",28),e.NdJ("click",function(){return r.deleteMember("oneSelf")}),e._uU(89," Yes "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.kEZ(32,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(1),e.Oqu(r.group.name),e.xp6(4),e.Q6J("ngClass",e.kEZ(36,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngIf",r.checkUsersRole()),e.xp6(1),e.Q6J("ngClass",e.kEZ(40,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngIf",r.checkUsersRole()),e.xp6(2),e.Q6J("ngIf",r.newUser),e.xp6(3),e.Q6J("ngClass",e.kEZ(44,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngIf",!r.editing),e.xp6(1),e.Q6J("ngIf",r.editing),e.xp6(2),e.Q6J("ngClass",e.kEZ(48,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("reload",r.reload),e.xp6(3),e.Q6J("ngClass",e.kEZ(52,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(7),e.Q6J("ngClass",e.kEZ(56,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(60,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(4),e.Q6J("ngClass",e.kEZ(64,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(68,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(6),e.Q6J("ngClass",e.kEZ(72,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(76,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngModel",r.opcion),e.xp6(1),e.Q6J("ngForOf",r.membersToDelete),e.xp6(2),e.Q6J("ngClass",e.kEZ(80,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(84,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngIf",r.editing),e.xp6(5),e.Q6J("ngClass",e.kEZ(88,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(92,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(96,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(100,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(6),e.Q6J("ngClass",e.kEZ(104,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(108,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(3),e.Q6J("ngClass",e.kEZ(112,a,r.dyslexia,r.cursor,r.spacing)),e.xp6(2),e.Q6J("ngClass",e.kEZ(116,a,r.dyslexia,r.cursor,r.spacing)))},directives:[d.mk,d.O5,h.Od,A,y,l.EJ,l.JJ,l.On,d.sg,l._Y,l.JL,l.sg,l.Fj,l.u,l.Wl,l.YN,l.Kr],styles:['.chat[_ngcontent-%COMP%]{margin:1rem 5rem;padding:0!important}.title[_ngcontent-%COMP%]{text-align:center;letter-spacing:3px;font-size:2em;font-family:Titan One,cursive;font-weight:700;text-shadow:4px 4px 2px #c8d8e4}.titleMembers[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;font-family:Titan One,cursive;font-weight:700}@font-face{font-family:OpenDyslexic3Regular;src:local("OpenDyslexic3Regular"),url(OpenDyslexic-Regular.0f3361c226094c3f.otf) format("truetype")}.dyslexia[_ngcontent-%COMP%]{font-family:OpenDyslexic3Regular!important;font-weight:400;font-style:normal}.biggerCursor[_ngcontent-%COMP%]{cursor:url("cursor(1).a626298f25970abf.png"),auto!important}.spacing[_ngcontent-%COMP%]{letter-spacing:3px!important}.chat[_ngcontent-%COMP%]{background-color:#fff;padding:1rem}.ranking[_ngcontent-%COMP%]{background-color:#f2f2f2;padding:1rem}.members[_ngcontent-%COMP%]{background-color:#c8d8e4;padding:1rem}.addMemberForm[_ngcontent-%COMP%]{margin-left:4rem;margin-right:.3rem;margin-top:2rem;border:black 1px solid;border-radius:8px}.check[_ngcontent-%COMP%]{margin-left:1rem}.icon2[_ngcontent-%COMP%]{max-width:35px!important;height:auto!important}.iconEdit[_ngcontent-%COMP%]{max-width:20px;height:auto}@media screen and (max-width: 769px){.content[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.boton[_ngcontent-%COMP%]{background-color:#52ab98;position:relative}.b1[_ngcontent-%COMP%]{float:right;margin-right:.5em;margin-bottom:.1em}.b2[_ngcontent-%COMP%]{float:left;margin-left:1.8em!important}.b3[_ngcontent-%COMP%]{float:left;margin-left:1.8em;margin-top:.1em}.b4[_ngcontent-%COMP%]{float:right;margin-right:.5em}.infoGrupo[_ngcontent-%COMP%]{margin-left:1rem}.chatDiv[_ngcontent-%COMP%]{margin:0}.addMemberForm[_ngcontent-%COMP%]{margin-left:2rem;margin-bottom:2rem}}@media screen and (min-width: 769px) and (max-width: 1279px){button[_ngcontent-%COMP%]{margin:auto}.b1[_ngcontent-%COMP%], .b2[_ngcontent-%COMP%], .b3[_ngcontent-%COMP%], .b4[_ngcontent-%COMP%]{margin-right:.5em}*[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.boton[_ngcontent-%COMP%]{background-color:#52ab98;float:right;margin-right:3em;position:relative;margin-left:3em}.addMemberForm[_ngcontent-%COMP%]{margin:2rem!important;border:black 1px solid;border-radius:8px}.labelCheck[_ngcontent-%COMP%]{margin-left:1.2rem!important}}@media screen and (min-width: 1279px){button[_ngcontent-%COMP%]{margin:auto}.b1[_ngcontent-%COMP%], .b2[_ngcontent-%COMP%], .b3[_ngcontent-%COMP%], .b4[_ngcontent-%COMP%]{margin-right:1em!important}*[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.boton[_ngcontent-%COMP%]{background-color:#52ab98;float:right;margin-right:3em;position:relative;margin-left:3em}.addMemberForm[_ngcontent-%COMP%]{margin:2rem!important;border:black 1px solid;border-radius:8px}.labelCheck[_ngcontent-%COMP%]{margin-left:1.2rem!important}}']}),n})()},{path:"addUserGroup",component:$},{path:"commentsGroup",component:y},{path:"rankingGroup",component:A}];let fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(he)],h.Bz]}),n})(),be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,fe,l.u5,l.UX]]}),n})()}}]);